<header class="navbar clearfix" id="header">
    <div class="container">
        <div class="navbar-brand">
          <!-- COMPANY LOGO -->
          <!-- <a href="index.html">
            <img src="img/logo/logo.png" alt="Cloud Admin Logo" class="img-responsive" height="30" width="120">
          </a> -->
          <!-- /COMPANY LOGO -->
          <!-- TEAM STATUS FOR MOBILE -->
          <div class="visible-xs">
            <a href="#" class="team-status-toggle switcher btn dropdown-toggle">
              <i class="fa fa-users"></i>
            </a>
          </div>
          <!-- /TEAM STATUS FOR MOBILE -->
          <!-- SIDEBAR COLLAPSE -->
          <div id="sidebar-collapse" class="">
            <span class="" data-icon1="fa fa-bars" data-icon2="fa fa-bars">
              <img src="./assets/images/logo/chat-logo.jpg" class="fa fa-barsd logo-set">
            </span>
          </div>
          <!-- /SIDEBAR COLLAPSE -->
        </div>
      
        <!-- BEGIN TOP NAVIGATION MENU -->          
        <ul class="nav navbar-nav pull-right">
        <ul class="nav navbar-nav pull-right">
          <!-- BEGIN NOTIFICATION DROPDOWN -->  
          <li class="dropdown" id="header-notification">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              <i class="fa fa-user-plus"></i>
              <span class="badge">{{chatProposals.length}}</span>            
            </a>
            <ul class="dropdown-menu notification alert-scroll" style="max-height: 300px;">
              <!-- <li class="dropdown-title">
                <span><i class="fa fa-bell"></i> 7 Notifications</span>
              </li> -->
              <li ng-repeat="chatReqObj in chatProposals" style="border-bottom: 1px solid rgba(0, 0, 0, 0.48);">
                <a href="#" style="max-width: 282px;padding-right: 80px;">
                  <img class="media-object online" alt="Generic placeholder image" ng-src="images/{{chatReqObj['sourceUserDetail']['img_url']}}" title="Available" style="height: 50px;width: 50px;margin-right: -30px;margin-top: 0px;">
                  <span class="body">
                    <span class="message">{{chatReqObj['message']}}</span>
                    <span>
                      <span style="border: 2px solid rgba(58, 54, 54, 0.59);    margin: 2px;padding: 2px;" ng-click="privateChatResponse(chatReqObj,true)">Accept</span>
                      <span style="border: 2px solid rgba(58, 54, 54, 0.59);    margin: 2px;padding: 2px;" ng-click="privateChatResponse(chatReqObj,false)">Reject</span>
                    </span>
                    <br />
                    <span class="time">
                      <i class="fa fa-clock-o"></i>
                      <span>Just Now</span>
                    </span>
                  </span>
                </a>
              </li>

              <li class="footer" ng-if="chatProposals.length == 0">
                <a href="#">No New Requests</a>
              </li>
            </ul>
          </li>
          <!-- END NOTIFICATION DROPDOWN -->
          <!-- BEGIN INBOX DROPDOWN -->
          <li class="dropdown" id="header-message" ng-click="updateReadNotificationCount()">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
            <i class="fa fa-envelope"></i>
            <span class="badge">{{notification.count-notification.read}}</span>
            </a>
            <ul class="dropdown-menu inbox alert-scroll" style="max-height: 300px;">

              <!-- <li class="dropdown-title">
                <span><i class="fa fa-envelope-o"></i> 3 Messages</span>
                <span class="compose pull-right tip-right" title="" data-original-title="Compose message"><i class="fa fa-pencil-square-o"></i></span>
              </li> -->

              <!-- <li ng-repeat="activity in notification.list track by $index">
                <a href="#" id="ancor">
                  <img ng-src="images/{{activity.img_url}}" style="width:20px;width:20px" alt="">
                  <span class="body">
                    <span class="from">{{activity.name}}</span>
                    <span class="message">
                    {{activity.type}}
                    </span> 
                  </span>
                   
                </a>
              </li> -->





              <li ng-repeat="activity in notification.list track by $index" style="    border-bottom: 1px solid rgba(0, 0, 0, 0.48);">
                <a href="#" style="max-width: 265px;"  ng-style="$index < (notification.count-notification.read)?{'background-color': '#D4D2F4'}:''">
                  <img class="media-object online" alt="Generic placeholder image" ng-src="images/{{activity.img_url}}" title="Available" style="height: 50px;width: 50px;margin-right: -30px;margin-top: 0px;">
                  <span class="body"  style="margin-left: 40px;">
                    <span class="from">{{activity.name}}</span>
                    <span class="message">
                    {{activity.type}}
                    </span> 
                  </span>
                </a>
              </li>




              
              <!-- <li class="footer">
                <a href="#">See all messages <i class="fa fa-arrow-circle-right"></i></a>
              </li> -->
            </ul>
          </li>
          <!-- END INBOX DROPDOWN -->
          
          <!-- BEGIN USER LOGIN DROPDOWN -->
          <li class="dropdown user" id="header-user">
            <a href="#" id="ancor" class="dropdown-toggle" data-toggle="dropdown">
              <!-- <img alt="" src="./assets/images/bheem.jpg" style="width:20px;width:20px"> -->
              <span class="username">{{user_info.user_name}}</span>
              <i class="fa fa-angle-down"></i>
            </a>
            <ul class="dropdown-menu" style="margin-top: 10px;">
              <!-- <li><a href="#"><i class="fa fa-user"></i> My Profile</a></li>
              <li><a href="#"><i class="fa fa-cog"></i> Account Settings</a></li>
              <li><a href="#"><i class="fa fa-eye"></i> Privacy Settings</a></li> -->
              <li style="border: 1px solid red;border-top: none;" ng-click="logOutUser()"><a><i class="fa fa-power-off"></i> Log Out</a></li>
            </ul>
          </li>
          <li>
            <img alt="" ng-src="images/{{user_info.img_url}}" style="width: 30px;">
          </li>
          <!-- END USER LOGIN DROPDOWN -->
        </ul>
        <!-- END TOP NAVIGATION MENU -->
    </div>

  </header>
  
  
  
<section id="page">

<!-- SIDEBAR -->
        <div id="sidebar" class="sidebar">
          <div class="sidebar-menu nav-collapse">
            <div class="divide-20"></div>
            <ul>
            <li class="mouse-hand online-user" title="{{obj['status']}}" ng-repeat="obj in activeSockets" ng-click="startPrivateChat(obj)">
            	<a class="" ><img class="media-object online" alt="Generic placeholder image" ng-src="images/{{obj['img_url']}}" style="height: 40px;width: 40px;"> <span class="menu-text"><i class="fa fa-circle"  ng-style="obj['status'] == 'Available' ? {'color':'green'}:{'color':'red'}"></i>{{obj["user_name"]}}</span></a>
            </li>
            <li ng-if="activeSocketCount == 0" style="margin-left: 60px;">
              <span>All Users are offline</span>
            </li>

                  
            </ul>
            <!-- /SIDEBAR MENU -->
          </div>
        </div>
        <!-- /SIDEBAR -->



    <div id="main-content" class="">
      <div class="container">
        <div class="row">
          <div id="content" class="col-md-12 chat-padding">
            <!-- PAGE HEADER-->
            <!-- <div class="row"> -->
              <div class="col-md-9">
                <div class="box border">
                  <div class="box-title">
                    <h4><i class="fa fa-comments"></i>Public Chat Window</h4>
                    <!-- <div class="tools">
                      <a href="#box-config" data-toggle="modal" class="config">
                        <i class="fa fa-cog"></i>
                      </a>
                      <a href="javascript:;" class="reload">
                        <i class="fa fa-refresh"></i>
                      </a>
                      <a href="javascript:;" class="collapse">
                        <i class="fa fa-chevron-up"></i>
                      </a>
                      <a href="javascript:;" class="remove">
                        <i class="fa fa-times"></i>
                      </a>
                    </div> -->
                  </div>
                  <div class="box-body big" style="max-height: 400px;
    overflow-y: scroll;width:100%;">
                    <div class="" data-height="402px" data-always-visible="1" data-rail-visible="1" id="public_chat">
                      <ul class="media-list chat-list" >
                        <li class="media" ng-repeat="message in publicMessageArray">
                          <span href="#" ng-class="message.created_by == 'Me'?'pull-right':'pull-left'" >
                          <img class="media-object public-user-picture" alt="Generic placeholder image" ng-src="images/{{message.img_url}}">
                          </span>
                          <div  ng-class="message.created_by == 'Me'?'pull-right':''" class="media-body chat-pop" ng-style="message.created_by == 'Me' && {'text-align': 'end'}">
                          <h4 class="media-heading">{{message.created_by}}<span ng-class="message.created_by == 'Me'?'pull-left':'pull-left'"></span></h4>
                          <p>{{message.messsage}}</p>
                          
                          </div>
                        </li>
                        
                      </ul>
                    </div>
                    
                  </div>
                  <div class="divide-20"></div>
                    <div class="chat-form">
                      <div class="input-group"> 
                        <input type="text" class="form-control" placeholder="Type something...really, it works" ng-model="public_chat_message" ng-keydown="sendMessageInPublicChat($event);"> 
                        <span class="input-group-btn" > <button class="btn btn-primary" type="button" id="public_chat_send"><i class="fa fa-check"></i></button> </span> 
                      </div>
                    </div>
                </div>
              </div>
            <!-- </div> -->

            <!-- <div class="footer-tools">
              <span class="go-top">
                <i class="fa fa-chevron-up"></i> Top
              </span>
            </div> -->
          </div><!-- /CONTENT-->
          
        </div>
        
        
        
        
      <!-- Private Chat Section Starts Here -->
      <div class=" chat-window col-md-4 private-chat-window" id="chat_window_1"   style="margin-left: 625px;" ng-show="privateChatSession.enable">   
        <div class="col-xs-12 col-md-12">
          <div class="panel panel-default">
                <div class="panel-heading top-bar header-color" style="background: #BAD9CD;">
                    <div class="col-md-8 col-xs-8">
                        <h3 class="panel-title"><span class="glyphicon glyphicon-comment"></span>{{privateChatSession["destinationUserDetails"].user_name}}</h3>
                    </div>
                    <div class="col-md-4 col-xs-4" style="text-align: right;">
                        <a href="#"><span id="minim_chat_window" class="glyphicon glyphicon-minus icon_minim"></span></a>
                        <a href="#"><span class="fa fa-times" id="privateChatWindow" data-id="chat_window_1" ng-click="closePrivateChat()"></span></a>
                    </div>
                </div>
                <div class="panel-body msg_container_base">


                    <div ng-repeat="private_message in privateMessageArray" class="row msg_container" ng-class="private_message['created_by'] == 'Me'?'base_sent':'base_receive'">

                        <div class="col-md-2 col-xs-2 avatar" ng-if="private_message['created_by'] != 'Me'">
                            <img ng-src="images/{{private_message['img_url']}}" class=" img-responsive " style="height: 40px;width: 40px;margin-left: 16px;">
                        </div>

                        <div class="col-md-10 col-xs-10">
                            <div class="messages" ng-class="private_message['created_by'] == 'Me'?'msg_sent':'msg_receive'" ng-style="private_message.created_by == 'Me' && {'text-align': 'end'}">
                                <p>{{private_message['messsage']}}</p>
                                <!-- <time datetime="2009-11-13T20:00">Timothy â€¢ 51 min</time> -->
                            </div>
                        </div>

                        <div class="col-md-2 col-xs-2 avatar"  ng-if="private_message['created_by'] == 'Me'">
                            <img ng-src="images/{{private_message['img_url']}}" class=" img-responsive ">
                        </div>

                    </div>

              </div>
              <div class="panel-footer">
                    <div class="input-group">
                        <input id="btn-input" type="text" class="form-control input-sm chat_input" placeholder="Write your message here..." ng-model="private_chat_message" ng-keydown="sendMessageInPrivateChat($event);"/>
                        <span class="input-group-btn">
                        <button class="btn btn-primary btn-sm" id="btn-chat">Send</button>
                        </span>
                    </div>
                </div>
          </div>
        </div>  
      </div>
      <!-- Private Chat Section Ends Here -->

    </div>
  </section>